---

copyright:
  years: 2023
lastupdated: "2023-07-31"

keywords: confidential computing, enclave, secure execution, hpcr, hyper protect virtual server for vpc, hyper protect secure build, hpsb, sbs

subcollection: vpc

---

{{site.data.keyword.attribute-definition-list}}

# Hyper Protect Secure Build
{: #about-hpsb}

By using Hyper Protect Secure Build, you can build a trusted container image within a secure enclave that is provided by {{site.data.keyword.cloud_notm}} {{site.data.keyword.hpvs}} for VPC. The enclave is highly isolated, where developers can access the container only by using a specific API and the cloud administrator cannot access the contents of the container. Therefore, the image that is built can be highly trusted. Specifically, the build server cryptographically signs the image, and a manifest (which is a collection of materials that are used during the build, for audits). Since the enclave protects the signing keys within the enclave, the signatures can be used to verify whether the image and manifest are from the build server, and not elsewhere.
{: shortdesc}


## Configuring and using Hyper Protect Secure Build in {{site.data.keyword.hpvs}} for VPC
{: #hpvs_hpsb}

Ensure that you use the latest Secure Build CLI code from [here](https://github.com/ibm-hyper-protect/secure-build-cli).

1. Complete the following steps to set up the Secure Build Server (SBS) client environment:
    1. Follow these [instructions](https://github.com/ibm-hyper-protect/secure-build-cli/blob/master/HPSB-VPC.md#install-the-secure-build-cli) to install the Secure Build CLI.
    2. Follow these [instructions](https://github.com/ibm-hyper-protect/secure-build-cli/blob/master/HPSB-VPC.md#preparing-the-configuration) to prepare the `sbs-config.json` configuration file.
2. Complete the following steps to create the `user-data.yaml`file that is used as the contract.

   1. Copy the following `workload` section of the contract that is generated via an automated process, into the `user-data.yaml`file. This `workload` section contains the encrypted details of the HPSB image. Use the following `workload` section of the contract for the IBM Hyper Protect Container Runtime image version `ibm-hyper-protect-container-runtime-1-0-s390x-9`.

      ```yaml
      hyper-protect-basic.t59vSf8h9QFNIkDJRr35nK7u207dGCWJoSKf2StviKcrsrXRibLZlxbAYTBdPgHFyUMQWJ+k4MJ25D1rXJGLTiPuC1OvjUxVNWLlyeIAOg+NnYKXiYBm987NEa/QKXJMbhon4FM46/w8JRQ8J7cx+DyzurMPf3fsij1rMo6hqv5eOefKRfv0RlCxPAclt6+TiGARkFL0vMl9mn37XU/xfzZ3e/WpXI6JATK/7bgvp0T0VjwvTQXKwWsae60njGlw0MLHysLbFh250Ytm600YtCxFDYMWpiRmyWGk2/rpsz+cgcBf61HTzMFb4cozfVJOvWz1k28lv+39y5QxjkzdilfvJz+3MjWApzzBR+AiW0BJVxHraB/iffjhGUQ72mQu2zN39JH0c9m+MSb5sfZR55AAPrWlo71UIWytBf0ZAVwjtdP47Ca4icJlRCE1DVPoNixqQ7QaRx9fpdFIzhcVJOn4I0KCALe6XgNovCtuh6dKWhA+70IyFA2x7qHGuHr9v7F25976fpaHvzk0XBovV2oSjOuR8VF0b3ZJcdOpYLQjwmv7ejg44QWa9nENR6ZLf+SeWYW98QFGJn/i8oWuOEAFcuh6kFMYGMvmDhfg25J3kTtRa7hyeEjhNRbf1YXJpZohL+DZ2wZZA+FqaZJ5ZnGu3vp4Je7fbjjcBthgMFA=.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
      ```
      {: codeblock}

   2. Create the `env` section of the contract. For more information about the `env` section of the contract, see [The env section](https://cloud.ibm.com/docs/vpc?topic=vpc-about-contract_se#hpcr_contract_env). [This](https://github.com/ibm-hyper-protect/secure-build-cli/blob/master/HPSB-VPC.md#an-example-of-the-env-section-of-the-contract) is an example of the `env` section of the contract.

   3. Combine the `workload` and `env` sections in the `user-data.yaml` file. The following snippet shows an example of how you can combine the two sections:

      ```sh
      workload: hyper-protect-basic.hxHW/t59vSf......GypHfK0pWjm
      env: hyper-protect-basic.i/ULZm+oz.......r09Db0SG9mzQ=
      ```
      {: screen}

      [This](/docs/vpc?topic=vpc-about-contract_se#step7) is example of a contract.


3. Follow these [instructions](https://github.com/ibm-hyper-protect/secure-build-cli/blob/master/HPSB-VPC.md#deploying-the-hyper-protect-secure-build-server) to deploy HPSB on {{site.data.keyword.hpvs}} for VPC, by using the certificates and the contract that you created in the previous step.

4. Follow the steps in these [instructions](https://github.com/ibm-hyper-protect/secure-build-cli/blob/master/HPSB-VPC.md#how-to-build-image-by-using-hpsb) to build the container image by using HPSB.

5. Follow the steps in these [instructions](https://github.com/ibm-hyper-protect/secure-build-cli/blob/master/HPSB-VPC.md#how-to-deploy-the-image-that-is-built-by-using-hpsb) to deploy the image that you built on {{site.data.keyword.hpvs}} for VPC.
